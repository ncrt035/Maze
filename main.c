#include<stdio.h>
#include<stdlib.h>
#include<time.h>

//ï¿½ï¿½ï¿½Oï¿½ï¿½ï¿½[ï¿½oï¿½ï¿½ï¿½È‚Qï¿½ï¿½ï¿½ï¿½ï¿½zï¿½ï¿½maze[10][10]ï¿½ï¿½ï¿½ï¿½ï¿½`
int maze[10][10]={
									{0,0,0,0,0,0,0,0,0,0},
							    {0,0,0,0,0,0,0,0,0,0},
							    {0,0,0,0,0,0,0,0,0,0},
							    {0,0,0,0,0,0,0,0,0,0},
							    {0,0,0,0,0,0,0,0,0,0},
							    {0,0,0,0,0,0,0,0,0,0},
							    {0,0,0,0,0,0,0,0,0,0},
							    {0,0,0,0,0,0,0,0,0,0},
							    {0,0,0,0,0,0,0,0,0,0},
							    {0,0,0,0,0,0,0,0,0,0}
								};

void MAZE_DEF()
{
	int i,j,k;
	int LU[3][5][5] =
	{		//[0]
		{
			{1,1,1,1,1},
			{1,0,0,0,0},
			{1,0,1,1,1},
			{1,2,1,1,1},
			{1,0,1,0,0}
		},
			//[1]
		{
			{1,1,1,1,1},
			{1,0,0,0,0},
			{1,0,1,0,1},
			{1,0,1,4,2},
			{1,0,1,0,1}
		},	//[2]
		{
			{1,1,1,1,1},
			{1,0,0,0,0},
			{1,1,1,0,1},
			{1,0,0,0,1},
			{1,0,1,0,0}
		}
	};
	int RU[3][5][5] =
	{
		//[0]
		{
			{1,1,1,1,1},
			{0,1,2,0,1},
			{0,1,1,0,1},
			{0,1,1,0,1},
			{4,0,0,0,1}

		},
		//[1]
		{
			{1,1,1,1,1},
			{0,0,0,0,1},
			{1,1,1,0,1},
			{0,2,4,0,1},
			{1,1,1,0,1}
		},
		//[2]
		{
			{1,1,1,1,1},
			{0,1,0,1,1},
			{0,2,0,0,1},
			{1,1,1,0,1},
			{0,0,0,0,1}
		},
	};
	int LD[3][5][5] =
	{
		//[0]
		{
			{1,0,1,1,1},
			{1,0,1,1,1},
			{1,0,2,0,1},
			{1,1,1,0,0},
			{1,1,1,1,1}
		},
		//[1]
		{
			{1,0,1,0,1},
			{1,0,1,2,0},
			{1,0,1,1,1},
			{1,0,0,0,0},
			{1,1,1,1,1}
		},
		//[2]
		{
			{1,0,1,0,1},
			{1,0,0,0,0},
			{1,0,1,0,1},
			{1,1,1,2,0},
			{1,1,1,1,1}
		},
	};
	int RD[3][5][5] =
	{
		//[0]
		{
			{1,1,1,0,1},
			{3,1,1,0,1},
			{0,1,1,0,1},
			{0,0,0,0,1},
			{1,1,1,1,1}
		},
		//[1]
		{
			{1,1,1,0,1},
			{1,3,1,0,1},
			{1,0,1,0,1},
			{0,4,0,0,1},
			{1,1,1,1,1}
		},
		//[2]
		{
			{1,0,0,0,1},
			{1,0,1,0,1},
			{0,2,1,0,1},
			{0,1,1,3,1},
			{1,1,1,1,1}
		},
	};

	srand((unsigned)time(NULL));

	k = rand()%3;
	for(i=0; i<5; i++)
	{
		for(j=0; j<5; j++)
		{
			maze[i][j] = LU[k][i][j];
		}
	}
	k = rand()%3;
	for(i=0; i<5; i++)
	{
		for(j=5; j<10; j++)
		{
			maze[i][j] = RU[k][i][j-5];
		}
	}
	k = rand()%3;
	for(i=5; i<10; i++)
	{
		for(j=0; j<5; j++)
		{
			maze[i][j] = LD[k][i-5][j];
		}
	}
	k = rand()%3;
	for(i=5; i<10; i++)
	{
		for(j=5; j<10; j++)
		{
			maze[i][j] = RD[k][i-5][j-5];
		}
	}
}

void main(void)
{
	char move;				//ï¿½Lï¿½[ï¿½{ï¿½[ï¿½hï¿½ï¿½ï¿½ï¿½ï¿½Ì“ï¿½ï¿½ÍŽæ“¾ï¿½pï¿½Ïï¿½
	int gold;				//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ç—ï¿½
	int g_gold;				//ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½pï¿½Ïï¿½
	int i,j;				//ï¿½sï¿½ï¿½ï¿½pï¿½Yï¿½ï¿½
	int player[2];			//ï¿½vï¿½ï¿½ï¿½Cï¿½ï¿½ï¿½Ê’uï¿½Ç—ï¿½
	int enemy[2];			//ï¿½Gï¿½ï¿½ï¿½ï¿½ï¿½Ê’u
	int e_life;				//ï¿½Gï¿½Ìï¿½ï¿½ï¿½ï¿½Ç—ï¿½
	int floor;				//ï¿½Kï¿½wï¿½Ç—ï¿½
	int clear;				//ï¿½Kï¿½wï¿½Nï¿½ï¿½ï¿½Aï¿½Ç—ï¿½
	int game_over;			//ï¿½Qï¿½[ï¿½ï¿½ï¿½Iï¿½[ï¿½oï¿½[ï¿½Ì”ï¿½ï¿½ï¿½
	int end;

	srand((unsigned)time(NULL));

	//ï¿½ï¿½ï¿½Ïï¿½ï¿½ï¿½ï¿½ï¿½ï¿½lï¿½ï¿½ï¿½`
	gold      = 0;

	e_life	  = 1;
	floor     = 1;
	clear     = 0;
	game_over = 0;

	while(floor < 6)
	{
		player[0] = 1;
		player[1] = 1;
		e_life    = 1;
		enemy[0]  = 8;
		enemy[1]  = 8;

		MAZE_DEF();



		while(clear != 1)
		{
			printf("B%dF    ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½%5dï¿½~\n", floor, gold);

			for(i=0; i<10; i++)				//ï¿½ï¿½ï¿½Hï¿½}ï¿½bï¿½vï¿½Ì•\ï¿½ï¿½
			{
				for(j=0; j<10; j++)
				{

					if(e_life != 0 && i == enemy[0] && j == enemy[1])
					{
						printf("ï¿½ï¿½");      //ï¿½G
					}
					else if(i == player[0] && j == player[1])
					{
						printf("ï¿½ï¿½");      //ï¿½vï¿½ï¿½ï¿½Cï¿½ï¿½
					}
					else if(maze[i][j] == 1)
					{
						printf("ï¿½ï¿½");      //ï¿½ï¿½
					}
					else if(maze[i][j] == 2)
					{
						printf("ï¿½ï¿½");      //ï¿½ï¿½ï¿½ï¿½
					}
					else if(maze[i][j] == 4)
					{
						printf("ï¿½w");		//ï¿½ï¿½
					}
					else if(maze[i][j] == 3)
					{
						if(floor == 5)
						{
							printf("ï¿½f");	//B5Fï¿½È‚ï¿½ï¿½Sï¿½[ï¿½ï¿½
						}
						else
						{
							printf("ï¿½e");   //ï¿½ï¿½ï¿½ï¿½ï¿½ÈŠOï¿½È‚ç‰ºï¿½ï¿½ï¿½Kï¿½i
						}
					}

					else
					{
						printf("ï¿½@");      //ï¿½ï¿½
					}
				}
				printf("\n");
			}

			 //ï¿½ï¿½ï¿½ó‹µ‚É‰ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½bï¿½Zï¿½[ï¿½Wï¿½Ì•\ï¿½ï¿½ï¿½Æ•ï¿½ï¿½ï¿½
			if(player[0] == enemy[0] && player[1] == enemy[1])  //ï¿½Gï¿½ÉPï¿½ï¿½ï¿½ê‚½ï¿½ê‡
			{
					game_over = 1;
			}
			else
			{}

			switch(maze[player[0]][player[1]])
			{
				case 2:								//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½ê‡
					g_gold = (rand()%9+1)*100;
					printf("%dï¿½~ï¿½ï¿½ï¿½ï¿½ï¿½è‚µï¿½Ü‚ï¿½ï¿½ï¿½ï¿½B", g_gold);
					gold = g_gold + gold;
					maze[player[0]][player[1]] = 0;
					break;

				case 3:					//ï¿½Kï¿½iï¿½É“ï¿½ï¿½Bï¿½ï¿½ï¿½ï¿½ï¿½ê‡
						floor += 1;
						clear  = 1;

					break;

				case 4:					//ã©‚ð“¥‚ñ‚¾ê‡
					game_over = 1;
					break;

				default:
					break;
			}

			if(clear == 1)				//ï¿½Kï¿½iï¿½É“ï¿½ï¿½Bï¿½ï¿½ï¿½ï¿½ï¿½ê‡ï¿½Ìï¿½ï¿½ï¿½ï¿½Ì‘ï¿½ï¿½ï¿½
			{
				clear = 0;
				system("cls");
				break;
			}
			else
			{}
			if(game_over == 1)
			{
				break;
			}
			else
			{}

											//ï¿½ï¿½ï¿½vï¿½ï¿½ï¿½Cï¿½ï¿½ï¿½Ì“ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½M
			move = getch();					//ï¿½Lï¿½[ï¿½{ï¿½[ï¿½hï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í‚ï¿½ï¿½æ“¾

			if(move == 50 && maze[player[0]+1][player[1]] != 1) //50ï¿½ï¿½2ï¿½ÌƒAï¿½Xï¿½Lï¿½[ï¿½Rï¿½[ï¿½h
			{
				player[0] = player[0]+1;
			}
			else if(move == 52 && maze[player[0]][player[1]-1] != 1)
			{
				player[1] = player[1]-1;
			}
			else if(move == 54 && maze[player[0]][player[1]+1] != 1)
			{
				player[1] = player[1]+1;
			}
			else if(move == 56 && maze[player[0]-1][player[1]] != 1)
			{
				player[0] = player[0]-1;
			}
			else
			{}

			if(e_life == 1)
			{
				switch( move )
				{
				case 50:
				case 52:
				case 54:
				case 56:
					if(enemy[0] > player[0] && maze[enemy[0]-1][enemy[1]] != 1)
					{
						 enemy[0] -= 1;
					}
					else if(enemy[0] < player[0] && maze[enemy[0]+1][enemy[1]] != 1)
					{
						 enemy[0] += 1;
					}
					else if(enemy[1] > player[1] && maze[enemy[0]][enemy[1]-1] != 1)
					{
						 enemy[1] -= 1;
					}
					else if(enemy[1] < player[1] && maze[enemy[0]][enemy[1]+1] != 1)
					{
						 enemy[1] += 1;
					}
					else
					{}
					break;
				}
			}
			else{}

			if(maze[enemy[0]][enemy[1]] == 4)	//ï¿½Gï¿½ï¿½ã©‚ð“¥‚ñ‚¾‚Æ‚ï¿½ï¿½Ìï¿½ï¿½ï¿½(ï¿½ï¿½ï¿½ï¿½)
			{
				e_life					 = 0;
				maze[enemy[0]][enemy[1]] = 0;
				enemy[0]				 = 0;
				enemy[1]				 = 0;
			}
			else{}



			system("cls");

		}
		if(game_over == 1)
		{
			break;
		}
	}

	if(game_over == 1)
	{
		puts("ï¿½cï¿½Oï¿½Å‚ï¿½ï¿½ï¿½ï¿½B");
		puts("ï¿½Qï¿½[ï¿½ï¿½ï¿½Iï¿½[ï¿½oï¿½[ï¿½Å‚ï¿½ï¿½B");
		printf("ï¿½ï¿½ï¿½Bï¿½K : B%5dF\n", floor);
		printf("ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ : %5dï¿½~\n", gold);

	}
	else
	{
		puts("+-----------------------+");
		puts("| ï¿½ï¿½ï¿½ß‚Å‚Æ‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ü‚ï¿½! |");
		puts("|   ï¿½Qï¿½[ï¿½ï¿½ï¿½Nï¿½ï¿½ï¿½Aï¿½Å‚ï¿½ï¿½B  |");
		puts("+-----------------------+");

		printf("ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ : %5dï¿½~\n", gold);
	}
	puts("ï¿½Iï¿½ï¿½ï¿½ï¿½ï¿½Ü‚ï¿½ï¿½B0ï¿½ï¿½ï¿½ï¿½ï¿½Í‚ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½B");
	scanf("%d", &end);
}
